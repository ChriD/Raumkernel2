# Makefile template for shared library

INCPATH = -I includes/

CC = g++-4.9
CXX = g++-4.9
CFLAGS = -std=c++11 -fPIC -Wall -Wno-unknown-pragmas -Wextra -O2 -c -pthread $(INCPATH)
CXXFLAGS = -std=c++11 -fPIC -Wall -Wno-unknown-pragmas -Wextra -O2 -c -pthread $(INCPATH)
LDFLAGS = -shared -pthread -static-libgcc -static-libstdc++

LIBSDEF =  libs/linux_x86/libohNetCore.a libs/linux_x86/libohNetDevices.a libs/linux_x86/libohNetProxies.a

RM = rm -f 
TARGET_LIB = libs/linux_x86/raumkern.so

SRCS = raumkernelBase.cpp raumkernelBaseMgr.cpp  raumkernel.cpp logger/loggerAdapter.cpp logger/logger.cpp manager/managerBase.cpp manager/managerEngineer.cpp manager/settingsManager.cpp manager/upnpManager.cpp manager/deviceManager.cpp device/deviceCreator.cpp device/device.cpp device/deviceMediaRenderer.cpp device/deviceMediaRenderer_RF.cpp device/deviceMediaRenderer_RFVirtual.cpp device/proxies/CpUpnpOrgContentDirectory1Std.cpp device/proxies/CpUpnpOrgAVTransport1Std.cpp device/proxies/CpUpnpOrgConnectionManager1Std.cpp device/proxies/CpUpnpOrgRenderingControl1Std.cpp device/proxies/CpUpnpOrgConnectionManager_RaumfeldVirtual1Std.cpp device/proxies/CpUpnpOrgRenderingControl_RaumfeldVirtual1Std.cpp device/proxies/CpUpnpOrgAVTransport_RaumfeldVirtual1Std.cpp device/deviceMediaServer.cpp device/deviceMediaServer_RF.cpp  device/proxies/CpUpnpOrgContentDirectory_Raumfeld1Std.cpp manager/zoneManager.cpp httpclient/httpClient.cpp httpclient/httpRequest.cpp httpclient/httpResponse.cpp httpclient/happyhttp.cpp tools/urlParser.cpp manager/mediaListManager.cpp device/eventParser/deviceEventParser.cpp device/eventParser/deviceEventParserMediaRenderer.cpp device/eventParser/deviceEventParserMediaServer.cpp media/item/mediaItem.cpp media/item/mediaItem_Album.cpp media/item/mediaItem_Artist.cpp media/item/mediaItem_Composer.cpp media/item/mediaItem_Container.cpp media/item/mediaItem_Genre.cpp media/item/mediaItem_LineIn.cpp media/item/mediaItem_Playlist.cpp media/item/mediaItem_Radio.cpp media/item/mediaItem_RhapsodyRadio.cpp media/item/mediaItem_Shuffle.cpp media/item/mediaItem_StorageFolder.cpp media/item/mediaItem_Track.cpp media/item/mediaItem_TrackContainer.cpp media/mediaItemCreator.cpp

OBJS = $(SRCS:.cpp=.o)

#.PHONY: test
#test: $(SRCS)
#	$(CC) -o $(TARGET_LIB) $(SRCS) -shared -fPIC -Wall -Wextra -O2


.PHONY: all
all: ${TARGET_LIB}
 
$(TARGET_LIB): $(OBJS)
	$(CC) ${LDFLAGS} -o $@ $^ $(LIBSDEF)
 
$(SRCS:.cpp=.d):%.d:%.cpp
	$(CC) $(CFLAGS) -MM $< >$@
 
include $(SRCS:.cpp=.d)
 

.PHONY: clean
clean:
	-${RM} ${TARGET_LIB} ${OBJS} $(SRCS:.cpp=.d) 
